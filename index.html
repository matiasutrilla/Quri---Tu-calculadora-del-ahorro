<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Quri — tu calculadora de ahorro</title>
<link rel="preconnect" href="https://fonts.googleapis.com" />
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet" />
<style>
  :root{
    --bg:#0e1b26;
    --panel:#122131;
    --panel-soft:#0f1d2b;
    --muted:#8fa6b8;
    --text:#eaf1f7;
    --brand:#ffd166; /* dorado */
    --brand-strong:#e7b93a;
    --ok:#1f8f3d;
    --ok-d:#116528;
    --danger:#d94141;
    --stroke:#24364a;
    --chip:#1a2a3d;
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0;
    font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial,"Noto Sans","Helvetica Neue",sans-serif;
    color:var(--text);
    background:linear-gradient(180deg,#0b1620,#0e1b26 30%,#0e1b26);
  }
  .wrap{
    max-width:1200px;
    margin:0 auto;
    padding:24px 18px 56px;
  }
  header{
    display:flex;
    align-items:center;
    gap:14px;
    margin-bottom:16px;
  }
  header img.logo{
    height:28px;
    width:auto;
  }
  header .title{
    font-weight:800;
    letter-spacing:.1px;
  }
  header .subtitle{
    font-size:.88rem;
    color:var(--muted);
  }
  .divider{
    height:4px;
    border-radius:2px;
    background:linear-gradient(90deg,var(--brand),#f6c95200);
    margin:12px 0 22px;
  }

  /* grid desktop */
  .grid{
    display:grid;
    grid-template-columns: 1fr 1fr;
    gap:18px;
  }
  @media(min-width:980px){
    .grid{ grid-template-columns: 1fr 1fr; }
    .layout{
      display:grid;
      grid-template-columns: 1.05fr .95fr;
      gap:20px;
      align-items:start;
    }
  }

  /* cards */
  .card{
    background:var(--panel);
    border:1px solid var(--stroke);
    border-radius:14px;
    box-shadow:0 10px 24px rgba(0,0,0,.28);
  }
  .card .card-body{ padding:18px; }
  .card h3{
    margin:0 0 14px;
    font-size:1.1rem;
    letter-spacing:.1px;
  }
  .row{display:grid; gap:12px;}
  @media(min-width:720px){
    .row.two{ grid-template-columns:1fr 1fr; }
    .row.three{ grid-template-columns:repeat(3,1fr); }
  }

  /* inputs */
  label{
    display:block;
    font-size:.86rem;
    color:var(--muted);
    margin:6px 0 6px;
  }
  .input, select{
    width:100%;
    background:var(--panel-soft);
    border:1px solid #1d2c3e;
    color:var(--text);
    border-radius:10px;
    padding:12px 12px;
    font-size:1rem;
    outline:none;
  }
  .input::placeholder{ color:#69829a; }

  /* product list */
  .products{
    display:flex;
    flex-direction:column;
    gap:12px;
  }
  .product{
    position:relative;
    background:var(--panel-soft);
    border:1px solid #203249;
    border-radius:14px;
    padding:12px 14px 12px 12px;
    display:grid;
    grid-template-columns: 56px 1fr;
    gap:12px;
    cursor:pointer;
    transition:all .15s ease;
  }
  .product:hover{ border-color:#2a415b; transform:translateY(-1px) }
  .product.selected{
    border-color:var(--brand);
    box-shadow:0 0 0 2px rgba(231,185,58,.25) inset, 0 10px 24px rgba(0,0,0,.25);
  }
  .product img{
    height:56px;width:56px;object-fit:contain;border-radius:10px;background:#0d1925;
  }
  .p-title{
    font-weight:700;
    margin:2px 0 4px;
    padding-right:140px; /* espacio para el cintillo */
  }
  .p-desc{ color:var(--muted); font-size:.95rem; }
  .badge{
    position:absolute;
    top:10px; right:12px;
    background:var(--brand);
    color:#1a1a1a;
    font-weight:800;
    font-size:.85rem;
    padding:6px 12px;
    border-radius:9999px;
    border:1px solid var(--brand-strong);
    box-shadow: inset 0 1px 0 rgba(255,255,255,.35), 0 3px 8px rgba(0,0,0,.25);
  }

  /* actions row */
  .actions{
    display:grid;
    grid-template-columns: 1fr auto auto;
    gap:10px;
    align-items:center;
    margin-top:10px;
  }
  .btn{
    display:inline-flex; align-items:center; justify-content:center;
    gap:8px;
    border-radius:12px;
    border:1px solid transparent;
    font-weight:700;
    padding:12px 16px;
    cursor:pointer;
    transition:all .15s ease;
    text-align:center;
    white-space:nowrap;
  }
  .btn-primary{ background:var(--danger); color:#fff; }
  .btn-primary:hover{ filter:brightness(1.05); }
  .btn-ghost{ background:#26384c; color:#dfe9f2; border-color:#2a415b; }
  .btn-ghost:hover{ background:#2b3f57; }
  .period{
    width:160px;
    background:#26384c;
    border-color:#36506a;
    padding:10px 12px;
    font-weight:600;
  }

  /* results */
  .results .card-body{padding:18px}
  .kpi{
    background:var(--panel-soft);
    border:1px solid #203249;
    border-radius:12px;
    padding:14px;
  }
  .kpi + .kpi{ margin-top:10px; }
  .kpi h4{
    margin:0 0 2px; font-size:.9rem; color:var(--muted); font-weight:600;
  }
  .money{
    font-weight:800; font-size:2.4rem; letter-spacing:.4px;
  }
  .sub{
    margin-top:4px; color:#a9bdce; font-size:.9rem;
  }

  /* lealtad */
  .loyalty{
    background:linear-gradient(180deg,#172940,#15273b);
    border:1px solid #2a3d54;
    border-radius:14px;
    padding:14px;
    box-shadow:0 8px 24px rgba(0,0,0,.25), 0 0 0 2px rgba(231,185,58,.18) inset;
    margin-bottom:12px;
  }
  .loyalty .tag{
    display:inline-flex; gap:8px; align-items:center;
    font-weight:800; color:var(--brand);
  }

  /* progreso */
  .progress{
    height:10px; width:100%; background:#21354a; border-radius:999px; overflow:hidden; margin-top:10px;
  }
  .progress > span{
    display:block; height:100%;
    background:linear-gradient(90deg,#39b35a,var(--ok));
    width:0%;
  }

  /* CTA */
  .cta{
    background:#0d2a16;
    border:1px solid #154d29;
    border-radius:14px;
    padding:12px;
  }
  .cta input{
    width:100%; background:#0f3b1f; border:1px solid #1b6a37; color:#cff2d6; border-radius:10px; padding:12px;
  }
  .cta .cta-btn{ margin-top:10px; background:var(--ok); }
  .cta .cta-btn:hover{ background:var(--ok-d); }

  /* mobile tweaks */
  @media(max-width:979px){
    .layout{ display:block; }
    .actions{ grid-template-columns: 1fr 1fr; }
    .actions .period{ grid-column:1 / -1; width:100%; }
  }
  @media(max-width:420px){
    .p-title{ padding-right:120px; }
    .badge{ font-size:.8rem; padding:5px 10px; }
  }

  /* print: solo resultados */
  @media print{
    body{ background:#fff; }
    .wrap > *:not(.print-only){ display:none !important; }
    .print-section{ display:block !important; }
  }
</style>
</head>
<body>
  <div class="wrap">
    <header class="print-only" style="display:block;">
      <img src="alicorp.png" class="logo" alt="Alicorp" />
      <div>
        <div class="title">Quri — tu calculadora de ahorro</div>
        <div class="subtitle">Buscando el dorado perfecto que rinde más</div>
      </div>
    </header>
    <div class="divider"></div>

    <div class="layout">
      <!-- Columna izquierda: datos + productos -->
      <div class="left">
        <!-- Sección 1: consumo actual -->
        <section class="card">
          <div class="card-body">
            <h3>Tu consumo de aceite hoy</h3>
            <div class="row two">
              <div>
                <label>Precio por balde (S/)</label>
                <input id="precioActual" type="number" min="0" class="input" placeholder="Ej. 124">
              </div>
              <div>
                <label>Litros por balde (L)</label>
                <input id="litrosActual" type="number" min="1" class="input" value="18">
              </div>
              <div>
                <label>Baldes por semana</label>
                <input id="baldesSemana" type="number" min="0" class="input" placeholder="Ej. 3">
              </div>
              <div>
                <label>Número de locales</label>
                <input id="locales" type="number" min="1" class="input" placeholder="Ej. 1">
              </div>
            </div>
          </div>
        </section>

        <!-- Sección 2: elegir especializado -->
        <section class="card" style="margin-top:14px;">
          <div class="card-body">
            <h3>Elige tu aceite especializado</h3>

            <div class="products" id="listaProductos">
              <!-- Crisol -->
              <div class="product selected" data-id="crisol" data-precio="160" data-litros="20" data-booster="1.5">
                <img src="crisol.png" alt="Crisol Fritura Intensa">
                <div>
                  <div class="p-title">Crisol Fritura Intensa</div>
                  <div class="p-desc">S/ 160 · 20 L · Excelencia en frituras</div>
                </div>
                <div class="badge">+50% rendimiento</div>
              </div>

              <!-- Tondero -->
              <div class="product" data-id="tondero" data-precio="130" data-litros="20" data-booster="1.3">
                <img src="tondero.png" alt="Tondero Premium Frituras">
                <div>
                  <div class="p-title">Tondero Premium Frituras</div>
                  <div class="p-desc">S/ 130 · 20 L · Rendimiento garantizado</div>
                </div>
                <div class="badge">+30% rendimiento</div>
              </div>

              <!-- Friol (no especializado) -->
              <div class="product" data-id="friol" data-precio="135" data-litros="18" data-booster="1.0">
                <img src="friol.png" alt="Friol Ultra (no especializado)">
                <div>
                  <div class="p-title">Friol Ultra <span style="color:#99aaba;">(no especializado)</span></div>
                  <div class="p-desc">S/ 135 · 18 L</div>
                </div>
              </div>
            </div>

            <!-- acciones + período -->
            <div class="actions">
              <button id="btnPdf" class="btn btn-primary">Guardar resultados (PDF)</button>
              <button id="btnClear" class="btn btn-ghost">Limpiar datos</button>
              <select id="periodo" class="period">
                <option value="semana">Por semana</option>
                <option value="mes" selected>Por mes</option>
                <option value="anio">Por año</option>
              </select>
            </div>
          </div>
        </section>
      </div>

      <!-- Columna derecha: resultados -->
      <div class="results">
        <section class="card print-section">
          <div class="card-body" id="panelResultados">

            <!-- Plan de lealtad -->
            <div id="lealtad" class="loyalty" style="display:none">
              <div class="tag">🟡 Crisol — Plan de lealtad</div>
              <div id="lealtadTxt" class="sub" style="margin-top:6px"></div>
            </div>

            <!-- ahorro -->
            <div class="kpi">
              <h4>💡 Ahorro estimado</h4>
              <div id="ahorro" class="money">S/ 0.00</div>
              <div id="ahorroNotas" class="sub">≈ 0.00 baldes gratis por <span data-per></span></div>
            </div>

            <div class="grid" style="margin-top:10px; gap:10px;">
              <div class="kpi">
                <h4>📊 Gasto actual (<span data-per></span>)</h4>
                <div id="gActual" class="money">S/ 0.00</div>
              </div>
              <div class="kpi">
                <h4>🧮 Gasto con aceite especializado (<span data-per></span>)</h4>
                <div id="gNuevo" class="money">S/ 0.00</div>
              </div>
            </div>

            <!-- progreso -->
            <div class="kpi" style="margin-top:10px;">
              <h4>📈 Progreso de ahorro</h4>
              <div id="progTxt" class="sub">Ahorro del 0% vs. situación actual</div>
              <div class="progress"><span id="progBar"></span></div>
            </div>

            <!-- precio máximo -->
            <div class="kpi" style="margin-top:10px;">
              <h4>💡 ¿Hasta cuánto podrías pagar por balde sin gastar más?</h4>
              <div id="maxPrecio" class="money">S/ 0.00</div>
              <div class="sub">Precio máximo por balde del aceite especializado.</div>
            </div>

            <!-- CTA -->
            <div class="cta" style="margin-top:12px;">
              <div style="font-weight:800; margin-bottom:8px;">¿Quieres comprobar este rendimiento en tu cocina? 🚀</div>
              <input id="correo" type="email" value="asesoriatecnica@alicorp.com.pe" />
              <button class="btn cta-btn" style="width:100%">Quiero recibir asesoría técnica</button>
              <div class="sub" style="margin-top:6px">Se enviará un correo con el resumen de tu análisis.</div>
            </div>

          </div>
        </section>
      </div>
    </div>
  </div>

<script>
(() => {
  const $ = sel => document.querySelector(sel);
  const $$ = sel => document.querySelectorAll(sel);
  const nf = new Intl.NumberFormat('es-PE',{minimumFractionDigits:2, maximumFractionDigits:2});

  // Inputs
  const precioActual = $('#precioActual');
  const litrosActual = $('#litrosActual');
  const baldesSemana = $('#baldesSemana');
  const locales = $('#locales');
  const periodoSel = $('#periodo');

  // Result targets
  const ahorroEl = $('#ahorro');
  const ahorroNotas = $('#ahorroNotas');
  const gActualEl = $('#gActual');
  const gNuevoEl = $('#gNuevo');
  const progTxt = $('#progTxt');
  const progBar = $('#progBar');
  const maxPrecioEl = $('#maxPrecio');
  const perHolders = $$('[data-per]');
  const lealtadBox = $('#lealtad');
  const lealtadTxt = $('#lealtadTxt');

  // Productos
  let seleccionado = {
    id:'crisol', nombre:'Crisol Fritura Intensa', precio:160, litros:20, booster:1.5
  };

  // Cambiar selección
  $$('#listaProductos .product').forEach(card=>{
    card.addEventListener('click', ()=>{
      $$('#listaProductos .product').forEach(c=>c.classList.remove('selected'));
      card.classList.add('selected');
      seleccionado = {
        id: card.dataset.id,
        nombre: card.querySelector('.p-title').textContent.trim(),
        precio: +card.dataset.precio,
        litros: +card.dataset.litros,
        booster: +card.dataset.booster
      };
      calcular();
    });
  });

  // Periodo texto
  function setPeriodoBadges(){
    const p = periodoSel.value;
    perHolders.forEach(sp=>{
      sp.textContent = (p==='semana'?'semana':(p==='mes'?'mes':'año'));
    });
  }

  // Cálculo
  function calcular(){
    setPeriodoBadges();

    const pAct = +precioActual.value || 0;
    const LAct = +litrosActual.value || 0;
    const bWeek = +baldesSemana.value || 0;
    const tiendas = +locales.value || 0;

    // Consumo real (litros/semana) con aceite actual
    const litrosSemana = LAct * bWeek; // volumen de fritura equivalente que queremos mantener

    // Con especializado:
    const litrosEfectivos = seleccionado.litros * seleccionado.booster;
    const baldesEspSemana = litrosEfectivos>0 ? (litrosSemana / litrosEfectivos) : 0;

    // Gastos por semana
    const gastoActualSemana = pAct * bWeek;
    const gastoEspSemana = seleccionado.precio * baldesEspSemana;

    // Escalar por nº de locales
    const GA_sem = gastoActualSemana * tiendas;
    const GE_sem = gastoEspSemana * tiendas;

    // Escala a período
    const factor = (periodoSel.value==='semana') ? 1 : (periodoSel.value==='mes'? 4.333 : 52);
    const GA = GA_sem * factor;
    const GE = GE_sem * factor;

    const ahorro = Math.max(GA - GE, 0);
    const pct = GA>0 ? Math.round((ahorro/GA)*100) : 0;

    // baldes gratis ≈ ahorro / precio especializado
    const baldesGratis = seleccionado.precio>0 ? (ahorro / seleccionado.precio) : 0;

    // Max precio por balde para no gastar más:
    const baldesPeriodoEsp = baldesEspSemana * tiendas * factor;
    const precioMax = baldesPeriodoEsp>0 ? (GA / baldesPeriodoEsp) : 0;

    // Pintar
    ahorroEl.textContent = 'S/ ' + nf.format(ahorro);
    ahorroNotas.innerHTML = '≈ ' + nf.format(baldesGratis) + ' baldes gratis por <span data-per></span>';
    setPeriodoBadges();
    gActualEl.textContent = 'S/ ' + nf.format(GA);
    gNuevoEl.textContent = 'S/ ' + nf.format(GE);
    progTxt.textContent = `Ahorro del ${pct}% vs. situación actual`;
    progBar.style.width = Math.min(100, pct) + '%';
    maxPrecioEl.textContent = 'S/ ' + nf.format(precioMax);

    // Lealtad (solo si Crisol)
    if(seleccionado.id==='crisol'){
      const puntos = Math.floor((GE)/10); // 1 punto por cada S/10 gastados con Crisol
      lealtadTxt.textContent = `Acumulas ${puntos} puntos (1 punto por cada S/10 gastados en Crisol Fritura Intensa).`;
      lealtadBox.style.display = 'block';
    } else {
      lealtadBox.style.display = 'none';
    }
  }

  // Auto-recalcular
  [precioActual, litrosActual, baldesSemana, locales, periodoSel].forEach(el=>{
    el.addEventListener('input', calcular);
    el.addEventListener('change', calcular);
  });

  // Botones
  $('#btnClear').addEventListener('click', ()=>{
    precioActual.value = '';
    litrosActual.value = 18;
    baldesSemana.value = '';
    locales.value = '';
    // reset a Crisol
    $$('#listaProductos .product').forEach(c=>c.classList.remove('selected'));
    const first = $$('#listaProductos .product')[0];
    first.classList.add('selected');
    seleccionado = { id:first.dataset.id, nombre:first.querySelector('.p-title').textContent.trim(),
      precio:+first.dataset.precio, litros:+first.dataset.litros, booster:+first.dataset.booster };
    calcular();
  });

  // Guardar PDF (se imprime solo el panel de resultados)
  $('#btnPdf').addEventListener('click', ()=>{
    window.print();
  });

  // Inicial
  setPeriodoBadges();
  calcular();
})();
</script>
</body>
</html>
