<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Quri ‚Äî tu calculadora de ahorro</title>
<style>
:root{
  --bg:#0b1321;
  --panel:#10192b;
  --panel2:#0f172a;
  --ink:#e5e7eb;
  --muted:#9aa3b2;
  --gold:#f0c24b;
  --gold2:#caa03a;
  --border:#1f2a40;
  --ok:#16a34a;
  --okbg:#0e1f15;
  --brand:#e11d2e;
}
*{box-sizing:border-box}
html,body{margin:0;height:100%}
body{
  font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Inter, Arial, "Noto Sans", sans-serif;
  background: radial-gradient(1200px 600px at 20% -10%, rgba(56,189,248,.10), transparent 60%),
              linear-gradient(180deg, #0a1020 0%, #0b1321 60%, #0b1321 100%);
  color:var(--ink);
}

/* Header */
header{
  display:flex; align-items:center; justify-content:space-between; gap:14px;
  padding:14px 18px; border-bottom:3px solid var(--gold);
  background: linear-gradient(180deg, rgba(255,255,255,.03), transparent);
}
.brand{display:flex; gap:12px; align-items:center}
.brand img{height:28px}
.title{margin:0; font-size:1.06rem; font-weight:800}
.tagline{margin:2px 0 0; color:var(--gold); font-weight:600; font-size:.92rem}

/* Layout */
main{
  max-width:1200px; margin:0 auto; padding:18px;
  display:grid; gap:18px; grid-template-columns:1fr; align-items:start;
}
@media (min-width:980px){ main{ grid-template-columns:1.05fr .95fr } .results{position:sticky; top:16px}}

/* Cards */
.card{
  background:var(--panel);
  border:1px solid var(--border);
  border-radius:16px;
  padding:16px;
  box-shadow:0 10px 24px rgba(0,0,0,.25), inset 0 1px 0 rgba(255,255,255,.04);
}
h2{margin:6px 0 12px; font-size:1.05rem; color:#fff}
hr.hr{border:none; border-top:1px solid var(--border); margin:14px 0}

/* Inputs */
label{display:block; font-weight:800; margin:10px 0 6px; color:#fff}
input{
  width:100%; padding:11px 12px; border-radius:10px; background:#0b1220;
  color:#fff; border:1px solid #27324a; font-size:1rem;
}
.note{color:var(--muted); font-size:.86rem}

/* Oils */
.oil-list{display:flex; flex-direction:column; gap:12px}
.oil{
  position:relative; display:flex; gap:12px; align-items:center; cursor:pointer;
  border:2px solid #23314d; border-radius:12px; padding:10px 12px;
  background:var(--panel2); transition:.18s;
}
.oil:hover{ box-shadow:0 10px 20px rgba(0,0,0,.25) }
.oil.active{ border-color:var(--gold); box-shadow:0 0 0 1px rgba(240,194,75,.35), 0 16px 28px rgba(0,0,0,.35) }
.oil img{
  width:64px; height:64px; object-fit:contain; border-radius:8px; background:#fff; border:1px solid #e5e7eb;
}
.name{font-weight:900; color:#fff}
.meta{color:var(--muted); font-size:.92rem}
.ribbon{
  position:absolute; top:12px; right:-34px; transform:rotate(45deg);
  background:linear-gradient(90deg,var(--gold) 0%, var(--gold2) 100%);
  color:#1b1202; font-weight:900; padding:6px 46px; font-size:.75rem;
  text-shadow:0 1px 0 rgba(255,255,255,.3);
}

/* Results */
.results h2{color:#fff}
.hero{
  border:1px solid var(--border); border-radius:14px; padding:16px;
  background:linear-gradient(180deg,#1b2337 0%, #111a2b 100%);
  margin-bottom:12px;
}
.big{font-size:2rem; font-weight:900}
.grid2{display:grid; gap:10px; grid-template-columns:1fr}
@media(min-width:700px){ .grid2{grid-template-columns:1fr 1fr} }
.kpi{background:#0f172a; border:1px solid var(--border); border-radius:12px; padding:12px}
.kpi .v{font-size:1.25rem; font-weight:900}

/* Loyalty */
.loyalty{
  border:2px dashed rgba(240,194,75,.65);
  border-radius:12px; padding:12px; background:#1a2135; margin-bottom:12px;
}
.loyalty h4{margin:0 0 6px; color:var(--gold)}

/* CTA */
.cta{
  background:var(--okbg); border:1px solid rgba(22,163,74,.3);
  border-left:6px solid var(--ok); border-radius:10px; padding:12px; margin-top:12px;
}
.cta .email{
  display:inline-block; padding:8px 10px; background:#06110b; color:#cdebd7;
  border-radius:8px; border:1px solid rgba(22,163,74,.35); margin:8px 8px 0 0;
  font-family: ui-monospace, Menlo, Consolas, monospace;
}
.cta a.btn{
  display:inline-block; padding:10px 12px; background:#16a34a; color:#fff;
  border-radius:10px; font-weight:800; text-decoration:none;
}

/* Bottom actions */
.actions{display:flex; gap:10px; margin-top:12px}
.btn{flex:1; padding:12px; border:none; border-radius:10px; font-weight:800; cursor:pointer; font-size:1rem}
.btn.save{background:var(--brand); color:#fff}
.btn.clear{background:#22314c; color:#fff}
</style>
</head>
<body>
<header>
  <div class="brand">
    <img src="https://upload.wikimedia.org/wikipedia/commons/6/64/Alicorp_logo.svg" alt="Alicorp">
    <div>
      <p class="title">Quri ‚Äî tu calculadora de ahorro</p>
      <p class="tagline">Buscando el dorado perfecto que rinda m√°s</p>
    </div>
  </div>
</header>

<main>
  <!-- IZQUIERDA -->
  <section class="card">
    <h2>Tu consumo de aceite hoy</h2>
    <label for="precioActual">Precio por balde (S/)</label>
    <input id="precioActual" type="number" min="0" step="0.01" placeholder="Ej. 124">
    <label for="litrosActual">Litros por balde actual (L)</label>
    <input id="litrosActual" type="number" min="1" step="1" value="18">
    <label for="baldesSemana">Baldes por semana</label>
    <input id="baldesSemana" type="number" min="0" step="1" placeholder="Ej. 3">
    <label for="numLocales">N√∫mero de locales</label>
    <input id="numLocales" type="number" min="0" step="1" placeholder="Ej. 1">

    <hr class="hr">
    <h2>Elige tu aceite especializado</h2>
    <div class="oil-list" id="oilList">
      <!-- CRISOL -->
      <div class="oil" data-key="crisol">
        <span class="ribbon">+50% rendimiento</span>
        <img src="crisol.png" alt="Crisol Fritura Intensa"
             onerror="this.onerror=null;this.src='https://via.placeholder.com/64x64.png?text=C';">
        <div>
          <div class="name">Crisol Fritura Intensa</div>
          <div class="meta">S/ 160 ¬∑ 20 L ¬∑ Excelencia en frituras</div>
        </div>
      </div>
      <!-- TONDERO -->
      <div class="oil" data-key="tondero">
        <span class="ribbon">+30% rendimiento</span>
        <img src="tondero.png" alt="Tondero Premium Fritura Intensa"
             onerror="this.onerror=null;this.src='https://via.placeholder.com/64x64.png?text=T';">
        <div>
          <div class="name">Tondero Premium Fritura Intensa</div>
          <div class="meta">S/ 130 ¬∑ 20 L ¬∑ Rendimiento confiable</div>
        </div>
      </div>
      <!-- FRIOL -->
      <div class="oil" data-key="friol">
        <img src="friol.png" alt="Friol Ultra"
             onerror="this.onerror=null;this.src='https://via.placeholder.com/64x64.png?text=F';">
        <div>
          <div class="name">Friol Ultra <span style="color:#94a3b8">(no especializado)</span></div>
          <div class="meta">S/ 135 ¬∑ 18 L</div>
        </div>
      </div>
    </div>
    <p class="note" style="margin-top:8px">Completa tus datos y elige un aceite; los resultados se actualizan autom√°ticamente.</p>
  </section>

  <!-- DERECHA -->
  <section class="card results" id="resultsCard">
    <h2>Resultado de tu transformaci√≥n</h2>

    <!-- Plan de Lealtad primero -->
    <div id="loyaltyBox" class="loyalty" style="display:none;">
      <h4>üéñÔ∏è Crisol ‚Äî Plan de Lealtad</h4>
      <p>Acumulas <strong id="puntosCrisol">0</strong> puntos (1 punto por cada S/10 gastados en Crisol Fritura Intensa).</p>
    </div>

    <div class="hero">
      <div style="font-weight:800; margin-bottom:6px;">üí∞ Ahorro estimado</div>
      <div class="big" id="ahorroTxt">S/ 0.00</div>
      <div class="note" id="equivalenciaBaldes" style="margin-top:6px">‚Äî</div>
    </div>

    <div class="grid2">
      <div class="kpi">
        <div class="note">üìâ Gasto actual (mes)</div>
        <div class="v" id="gastoActualTxt">S/ 0.00</div>
      </div>
      <div class="kpi">
        <div class="note">üìà Gasto con seleccionado (mes)</div>
        <div class="v" id="gastoNuevoTxt">S/ 0.00</div>
      </div>
    </div>

    <div class="kpi" style="margin-top:10px">
      <div class="note">üî• Progreso de ahorro</div>
      <div id="progresoTxt" style="font-weight:700">‚Äî</div>
    </div>

    <div class="kpi" style="margin-top:10px">
      <div class="note">üí° ¬øHasta cu√°nto podr√≠as pagar por balde sin gastar m√°s?</div>
      <div class="v" id="precioMaxTxt">S/ ‚Äî</div>
    </div>

    <div class="cta">
      <div style="font-weight:800">¬øQuieres comprobar este rendimiento en tu cocina? üöÄ</div>
      <span class="email">asesoriatecnica@alicorp.com.pe</span>
      <a class="btn" href="mailto:asesoriatecnica@alicorp.com.pe?subject=Quiero%20asesor%C3%ADa%20t%C3%A9cnica%20(Quri)">Quiero recibir asesor√≠a t√©cnica</a>
    </div>

    <div class="actions">
      <button class="btn save" id="btnGuardar">Guardar resultados (PDF)</button>
      <button class="btn clear" id="btnLimpiar">Limpiar datos</button>
    </div>
  </section>
</main>

<!-- jsPDF para exportar solo resultados -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<script>
/* Config productos */
const OILS = {
  crisol:  { nombre:'Crisol Fritura Intensa',  precio:160, litros:20, factor:1.50, lealtad:true  },
  tondero: { nombre:'Tondero Premium Fritura', precio:130, litros:20, factor:1.30, lealtad:false },
  friol:   { nombre:'Friol Ultra (no esp.)',   precio:135, litros:18, factor:1.00, lealtad:false }
};

/* Elements */
const els = {
  precio: document.getElementById('precioActual'),
  litros: document.getElementById('litrosActual'),
  baldes: document.getElementById('baldesSemana'),
  locales:document.getElementById('numLocales'),

  ahorro:  document.getElementById('ahorroTxt'),
  gastoA:  document.getElementById('gastoActualTxt'),
  gastoN:  document.getElementById('gastoNuevoTxt'),
  prog:    document.getElementById('progresoTxt'),
  pmax:    document.getElementById('precioMaxTxt'),
  eq:      document.getElementById('equivalenciaBaldes'),

  loyBox:  document.getElementById('loyaltyBox'),
  pts:     document.getElementById('puntosCrisol'),

  btnPDF:  document.getElementById('btnGuardar'),
  btnClr:  document.getElementById('btnLimpiar')
};

let seleccionado = null;

document.querySelectorAll('.oil').forEach(card=>{
  card.addEventListener('click', ()=>{
    document.querySelectorAll('.oil').forEach(c=>c.classList.remove('active'));
    card.classList.add('active');
    seleccionado = OILS[card.dataset.key] || null;
    recalcular();
  });
});

[els.precio, els.litros, els.baldes, els.locales].forEach(i=> i.addEventListener('input', recalcular));

function n(v){ const x = parseFloat(v); return isNaN(x)?0:x; }
function f2(x){ return Number(x).toFixed(2); }

function resetResults(){
  els.ahorro.textContent = 'S/ 0.00';
  els.gastoA.textContent = 'S/ 0.00';
  els.gastoN.textContent = 'S/ 0.00';
  els.prog.textContent   = '‚Äî';
  els.pmax.textContent   = 'S/ ‚Äî';
  els.eq.textContent     = '‚Äî';
  els.loyBox.style.display = 'none';
}

function recalcular(){
  const P = n(els.precio.value);
  const L = n(els.litros.value) || 0;
  const B = n(els.baldes.value);
  const N = n(els.locales.value);

  if(!seleccionado || !P || !L || !B || !N){ resetResults(); return; }

  const baldesMes = B * 4 * N;           // baldes/mes actuales
  const gastoAct  = P * baldesMes;       // S/ mes actual
  const litrosMes = L * baldesMes;       // L/mes actual

  const baldesNuevo = litrosMes / (seleccionado.litros * seleccionado.factor);
  const gastoNuevo  = seleccionado.precio * baldesNuevo;
  const ahorro      = gastoAct - gastoNuevo;
  const pct         = gastoAct>0 ? (ahorro/gastoAct*100) : 0;

  els.gastoA.textContent = 'S/ ' + f2(gastoAct);
  els.gastoN.textContent = 'S/ ' + f2(gastoNuevo);
  els.ahorro.textContent = 'S/ ' + f2(ahorro);
  els.prog.textContent   = (pct>=0?'+':'') + f2(pct) + '% vs. situaci√≥n actual';

  const baldesGratis = gastoNuevo>0 ? (ahorro / seleccionado.precio) : 0;
  els.eq.textContent = '‚âà ' + f2(baldesGratis) + ' baldes gratis/mes';

  const pMax = baldesNuevo>0 ? (gastoAct / baldesNuevo) : 0;
  els.pmax.textContent = 'S/ ' + f2(pMax);

  if(seleccionado.lealtad){
    const puntos = gastoNuevo / 10; // 1 punto cada S/10
    els.pts.textContent = Math.round(puntos);
    els.loyBox.style.display = 'block';
  }else{
    els.loyBox.style.display = 'none';
  }
}

/* Limpiar */
els.btnClr.addEventListener('click', ()=>{
  [els.precio, els.litros, els.baldes, els.locales].forEach(i=> i.value='');
  els.litros.value = 18;
  document.querySelectorAll('.oil').forEach(c=>c.classList.remove('active'));
  seleccionado = null;
  resetResults();
});

/* Guardar PDF ‚Äî solo resultados */
els.btnPDF.addEventListener('click', ()=>{
  const { jsPDF } = window.jspdf;
  const doc = new jsPDF({ unit:'pt', format:'a4', compress:true });

  const add=(t,x,y,s=12,b=false)=>{doc.setFont('helvetica',b?'bold':'normal');doc.setFontSize(s);doc.text(String(t),x,y);};

  let y=64,x=50;
  add('Quri ‚Äî Resultado de tu transformaci√≥n',x,y,18,true); y+=26;

  add('Ahorro estimado:',x,y,12,true); add(els.ahorro.textContent,x+150,y,12,true); y+=20;
  add('Gasto actual (mes):',x,y); add(els.gastoA.textContent,x+180,y); y+=18;
  add('Gasto con seleccionado (mes):',x,y); add(els.gastoN.textContent,x+220,y); y+=18;
  add('Progreso de ahorro:',x,y); add(els.prog.textContent,x+150,y); y+=18;
  add('Precio m√°x. por balde sin gastar m√°s:',x,y); add(els.pmax.textContent,x+300,y); y+=22;

  if(seleccionado && seleccionado.lealtad){
    add('Plan de Lealtad Crisol',x,y,14,true); y+=18;
    add('Puntos estimados:',x,y); add(document.getElementById('puntosCrisol').textContent+' pts/mes',x+140,y); y+=20;
  }

  add('Contacto: asesoriatecnica@alicorp.com.pe',x,780);
  doc.save('Quri_resultados.pdf');
});
</script>
</body>
</html>
