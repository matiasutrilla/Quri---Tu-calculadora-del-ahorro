<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Quri â€” tu calculadora de ahorro</title>

<!-- TipografÃ­a -->
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet"/>

<style>
:root{
  --bg:#0e1620;
  --panel:#121c28;
  --panel-2:#0f1a25;
  --muted:#9fb0c4;
  --text:#e6eef9;
  --gold:#e1b757;
  --gold-2:#b58f3b;
  --card-border:#223041;
  --accent:#1a2a3b;
  --success:#1e7f3e;
  --success-2:#0d5f2a;
  --danger:#e44c4c;
  --shadow:0 6px 18px rgba(0,0,0,.35);
}

*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  background:
    radial-gradient(1000px 500px at 50% -200px, #142234 0%, transparent 60%),
    linear-gradient(180deg, #0b1520, #0b1520);
  color:var(--text);
  font-family:Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, "Helvetica Neue", sans-serif;
}

/* Layout */
.wrapper{max-width:1200px;margin:0 auto;padding:20px}
.header{
  display:flex; align-items:center; gap:18px; padding:8px 2px 16px 2px;
}
.header img{height:28px}
.title h1{margin:0;font-size:18px;font-weight:800;letter-spacing:.1px}
.title .sub{margin-top:2px;color:var(--muted);font-size:12px}
.hr{height:3px;background:linear-gradient(90deg, transparent, var(--gold), transparent);border-radius:4px;margin:10px 0 18px}

/* Grid principal */
.main{
  display:grid; grid-template-columns: 1fr 1fr; gap:20px;
}
@media (max-width: 980px){
  .main{grid-template-columns:1fr}
}

/* Panel genÃ©rico */
.card{
  background:linear-gradient(180deg, #101a27, #0e1823);
  border:1px solid var(--card-border);
  box-shadow: var(--shadow);
  border-radius:14px;
  padding:16px;
}

/* Secciones */
.section-title{
  font-weight:800; font-size:18px; margin:6px 0 12px;
}

/* Inputs */
.form-grid{
  display:grid; grid-template-columns:repeat(2,1fr); gap:12px;
}
@media (max-width:700px){ .form-grid{grid-template-columns:1fr} }
.field{display:flex;flex-direction:column;gap:6px}
.field label{color:var(--muted);font-size:12px}
.input{
  background:var(--panel-2);
  border:1px solid var(--card-border);
  border-radius:10px; height:44px; color:var(--text); padding:0 12px; outline:none;
}
.input::placeholder{color:#6f8299}

/* Productos */
.products{display:flex;flex-direction:column;gap:12px}
.product{
  position:relative; display:grid; grid-template-columns:auto 1fr; gap:14px;
  align-items:center; padding:14px;
  background:linear-gradient(180deg, #0f1a25, #0f1a25);
  border:1px solid var(--card-border); border-radius:14px; cursor:pointer;
  transition: border-color .2s, box-shadow .2s;
}
.product.selected{border-color:var(--gold); box-shadow:0 0 0 4px rgba(225,183,87,.08)}
.product img{width:56px;height:56px;object-fit:contain}
.p-info .p-name{font-weight:800}
.p-info .p-meta{color:var(--muted);font-size:13px;margin-top:2px}

/* Ribbon horizontal superior derecha */
.ribbon{
  position:absolute; top:12px; right:12px;
  background:linear-gradient(180deg, #f3d37e, #e4b954);
  color:#1a1a1a; font-weight:800; font-size:12px;
  padding:6px 12px; border-radius:999px; border:1px solid #d2a645;
  box-shadow:0 2px 6px rgba(0,0,0,.25);
}

/* Botonera + periodo */
.actions{display:flex;gap:12px;flex-wrap:wrap;align-items:center;margin-top:10px}
.btn{
  border:0; border-radius:12px; padding:12px 16px; font-weight:800; cursor:pointer;
}
.btn.save{background:#e04b4b;color:#fff}
.btn.clean{background:#2b3a4d;color:#dfe9f7}
.period-wrap{margin-left:auto;display:flex;gap:8px;align-items:center}
@media (max-width:900px){
  .period-wrap{margin-left:0;width:100%}
  .period-wrap select{flex:1}
}
.sel{height:44px;background:var(--panel-2);border:1px solid var(--card-border);
     color:var(--text);border-radius:10px;padding:0 12px}

/* Resultados */
.kpi-card{
  position:relative;
  background: radial-gradient(120% 140% at 20% 0%, #172536 0%, #0e1823 70%);
  border:1px solid var(--card-border); border-radius:14px; padding:16px; margin-top:10px;
}
.kpi-head{display:flex;align-items:center;gap:8px;color:#e7d7a6;font-weight:800; font-size:13px}
.kpi-value{font-size:40px; font-weight:800; letter-spacing:.5px; margin:8px 0 2px}
.kpi-sub{color:var(--muted);font-size:12px}

/* grid de gastos: 2 cols desktop, 1 col mobile */
.exp-grid{display:grid; grid-template-columns:1fr 1fr; gap:12px}
@media (max-width:900px){ .exp-grid{grid-template-columns:1fr} }

.tile{
  background:linear-gradient(180deg,#101a27,#0d1722);
  border:1px solid var(--card-border); border-radius:12px; padding:14px;
}
.tile .t-label{color:var(--muted); font-size:13px; margin-bottom:6px}
.tile .t-value{font-weight:800; font-size:30px}

/* Progreso */
.progress.card{padding:14px}
.progress .t-label{margin-bottom:10px}
.bar{
  background:#223243; height:10px; border-radius:999px; overflow:hidden; border:1px solid #1f3043;
}
.bar span{display:block;height:100%; width:0%;
  background:linear-gradient(90deg,#56d17e,#19a95b); transition:width .35s ease}

/* Plan de lealtad â€” tarjeta ejecutiva */
.loyalty{
  background:
   radial-gradient(120% 140% at 0% 0%, rgba(225,183,87,.18) 0%, rgba(225,183,87,0) 60%),
   linear-gradient(180deg,#101a27,#0f1a25);
  border:1px solid rgba(225,183,87,.45);
  box-shadow: inset 0 0 0 1px rgba(255,255,255,.04), var(--shadow);
  border-radius:14px; padding:14px; margin-bottom:8px;
}
.loyalty .kpi-head{color:#f0dca6}

/* utilidad */
.badge{font-weight:800;font-size:12px;color:#f8e9c1;background:#3a2b10;border:1px solid #84651e;padding:4px 8px;border-radius:10px}
.muted{color:var(--muted);font-size:12px}
.hr-slim{height:1px;background:#1e2c3c;border:0;margin:12px 0}
.logo{height:24px}
</style>
</head>
<body>
  <div class="wrapper">
    <!-- Header -->
    <div class="header">
      <img src="./alicorp.png" alt="Alicorp" class="logo" />
      <div class="title">
        <h1>Quri â€” tu calculadora de ahorro</h1>
        <div class="sub">Buscando el dorado perfecto que rinda mÃ¡s</div>
      </div>
    </div>
    <div class="hr"></div>

    <!-- Contenido -->
    <div class="main">

      <!-- Columna izquierda: Consumo & SelecciÃ³n -->
      <div class="left">
        <div class="card">
          <div class="section-title">Tu consumo de aceite hoy</div>
          <div class="form-grid">
            <div class="field">
              <label>Precio por balde (S/)</label>
              <input id="precioActual" type="number" class="input" placeholder="Ej. 124" value="124" min="0" step="0.01">
            </div>
            <div class="field">
              <label>Litros por balde (L)</label>
              <input id="litrosActual" type="number" class="input" placeholder="18" value="18" min="1" step="1">
            </div>
            <div class="field">
              <label>Baldes por semana</label>
              <input id="baldesSemana" type="number" class="input" placeholder="Ej. 3" value="3" min="0" step="1">
            </div>
            <div class="field">
              <label>NÃºmero de locales</label>
              <input id="locales" type="number" class="input" placeholder="1" value="1" min="1" step="1">
            </div>
          </div>
        </div>

        <div class="card" style="margin-top:16px">
          <div class="section-title">Elige tu aceite especializado</div>

          <div id="prod-crisol" class="product selected" data-precio="160" data-litros="20" data-rend="0.5">
            <img src="./crisol.png" alt="Crisol Fritura Intensa">
            <div class="p-info">
              <div class="p-name">Crisol Fritura Intensa</div>
              <div class="p-meta">S/ 160 Â· 20 L Â· Excelencia en frituras</div>
            </div>
            <div class="ribbon">+50% rendimiento</div>
          </div>

          <div id="prod-tondero" class="product" data-precio="130" data-litros="20" data-rend="0.3">
            <img src="./tondero.png" alt="Tondero Premium Frituras">
            <div class="p-info">
              <div class="p-name">Tondero Premium Frituras</div>
              <div class="p-meta">S/ 130 Â· 20 L Â· Rendimiento garantizado</div>
            </div>
            <div class="ribbon">+30% rendimiento</div>
          </div>

          <div id="prod-friol" class="product" data-precio="135" data-litros="18" data-rend="0" data-nospec="1">
            <img src="./friol.png" alt="Friol Ultra 18L">
            <div class="p-info">
              <div class="p-name">Friol Ultra (no especializado)</div>
              <div class="p-meta">S/ 135 Â· 18 L</div>
            </div>
          </div>

          <div class="actions">
            <button id="btnSave" class="btn save">Guardar resultados (PDF)</button>
            <button id="btnClear" class="btn clean">Limpiar datos</button>

            <div class="period-wrap">
              <span class="muted" style="font-size:12px">Periodo</span>
              <select id="periodo" class="sel">
                <option value="mes" selected>Por mes</option>
                <option value="semana">Por semana</option>
                <option value="anio">Por aÃ±o</option>
              </select>
            </div>
          </div>
        </div>
      </div>

      <!-- Columna derecha: Resultados -->
      <div class="right">
        <!-- Loyalty (solo con Crisol) -->
        <div id="loyaltyCard" class="loyalty" style="display:block;">
          <div class="kpi-head">ðŸ”¥ Crisol â€” Plan de lealtad</div>
          <div id="loyaltyText" class="muted" style="margin-top:6px">
            Acumulas 0 puntos (1 punto por cada S/10 gastados en Crisol Fritura Intensa).
          </div>
        </div>

        <!-- Ahorro estimado -->
        <div class="kpi-card">
          <div class="kpi-head">ðŸ’¡ Ahorro estimado</div>
          <div id="ahorroValor" class="kpi-value">S/ 0.00</div>
          <div id="ahorroSub" class="kpi-sub">â‰ˆ 0 baldes gratis por mes</div>
        </div>

        <!-- Gastos -->
        <div class="exp-grid" style="margin-top:12px">
          <div class="tile">
            <div id="lblGA" class="t-label">Gasto actual (mes)</div>
            <div id="gastoActual" class="t-value">S/ 0.00</div>
          </div>
          <div class="tile">
            <div id="lblGE" class="t-label">Gasto con aceite especializado (mes)</div>
            <div id="gastoEspecial" class="t-value">S/ 0.00</div>
          </div>
        </div>

        <!-- Progreso -->
        <div class="tile progress" style="margin-top:12px">
          <div class="t-label">Progreso de ahorro</div>
          <div class="bar"><span id="barPct"></span></div>
          <div id="pctText" class="muted" style="margin-top:8px">Ahorro del 0% vs. situaciÃ³n actual</div>
        </div>

        <!-- Precio mÃ¡ximo por balde sin gastar mÃ¡s -->
        <div class="tile" style="margin-top:12px">
          <div class="t-label">Â¿Hasta cuÃ¡nto podrÃ­as pagar por balde sin gastar mÃ¡s?</div>
          <div id="precioMax" class="t-value">S/ 0.00</div>
          <div class="muted">Precio mÃ¡ximo por balde del aceite especializado.</div>
        </div>

        <!-- CTA asesorÃ­a -->
        <div class="card" style="margin-top:12px;background:linear-gradient(180deg,#0e2318,#0a1b12);border-color:#1f4c2f">
          <div class="section-title" style="margin:0 0 10px">Â¿Quieres comprobar este rendimiento en tu cocina? ðŸš€</div>
          <input id="email" class="input" value="asesoriatecnica@alicorp.com.pe" style="margin:0 0 10px" />
          <button class="btn" style="background:#1c6f3b;color:#fff;font-weight:800">Quiero recibir asesorÃ­a tÃ©cnica</button>
          <div class="muted" style="margin-top:8px">Se enviarÃ¡ un correo con el resumen de tu anÃ¡lisis.</div>
        </div>
      </div>

    </div>
  </div>

<!-- html2pdf para guardar resultados -->
<script src="https://cdn.jsdelivr.net/npm/html2pdf.js@0.9.3/dist/html2pdf.bundle.min.js"></script>
<script>
const nf = new Intl.NumberFormat('es-PE', {minimumFractionDigits:2, maximumFractionDigits:2});

const $ = (id)=>document.getElementById(id);

const state = {
  producto: 'crisol', // crisol | tondero | friol
  precioSel: 160, litrosSel: 20, rend: 0.5,
};

const periodos = {
  semana: { label:'sem', factor:1,     toMes: 1 },      // usado solo para labels
  mes:    { label:'mes', factor:4.33,  toMes: 1 },
  anio:   { label:'aÃ±o', factor:52,    toMes: 12 },
};

function factorPeriodo(){
  const p = $('periodo').value;
  return p==='semana' ? 1 : (p==='mes' ? 4.33 : 52);
}
function etiquetaPeriodoCorta(){
  const p = $('periodo').value;
  return p==='semana' ? 'sem' : (p==='mes' ? 'mes' : 'aÃ±o');
}

function pickProduct(el, key){
  document.querySelectorAll('.product').forEach(p=>p.classList.remove('selected'));
  el.classList.add('selected');
  state.producto = key;
  state.precioSel = parseFloat(el.dataset.precio);
  state.litrosSel = parseFloat(el.dataset.lit
